# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Gitops < Formula
  desc "GitOps support for Kubernetes"
  homepage "https://docs.gitops.weave.works/docs/getting-started"
  version "0.4.1"
  
  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/weaveworks/weave-gitops/releases/download/v0.4.1/gitops-darwin-arm64"
      sha256 "f69c6773cfdfef82bb1c1a656a1c6261cead25733694d80ce4b2da294401c13f"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/weaveworks/weave-gitops/releases/download/v0.4.1/gitops-darwin-x86_64"
      sha256 "528543595008873a60a47ba763a27f3f5a9e507648780771dc6e111dd52d195e"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/weaveworks/weave-gitops/releases/download/v0.4.1/gitops-linux-x86_64"
      sha256 "36625708ffe6983c57e31b28d6a7bd82f0eadc18df674a8884f51df62d4cd328"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/weaveworks/weave-gitops/releases/download/v0.4.1/gitops-linux-arm64"
      sha256 "342c0b2938c588304c8d2fa39aed417e5e9ee0eb4b508e107d6e19df25eaf6bb"

      def install
        bin.install "gitops"
        bash_output = Utils.safe_popen_read(bin/"gitops", "completion", "bash")
        (bash_completion/"gitops").write bash_output
        zsh_output = Utils.safe_popen_read(bin/"gitops", "completion", "zsh")
        (zsh_completion/"_gitops").write zsh_output
      end
    end
  end

  test do
    system "#{bin}/gitops version"
  end
end
