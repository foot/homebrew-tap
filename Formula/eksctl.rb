# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Eksctl < Formula
  desc "The official CLI for Amazon EKS"
  homepage "https://eksctl.io/"
  version "0.71.0"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.71.0/eksctl_Darwin_arm64.tar.gz"
      sha256 "85e45bb96736ee9eb4e85848d914beb5dc696fa8dbdb955666f867d9b89c6ca2"
    end
    if Hardware::CPU.intel?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.71.0/eksctl_Darwin_amd64.tar.gz"
      sha256 "d1aeeb5a2edfba57e5dc970adcd8d0ce928cdcd17dbca9fd6f27a5abcf14f93e"
    end
  end

  on_linux do
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.71.0/eksctl_Linux_armv6.tar.gz"
      sha256 "b0e972a62675430292fdd23db5473d2c2c71cb238f830fa33349f688e65e0009"
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.71.0/eksctl_Linux_arm64.tar.gz"
      sha256 "760e82a0980af16e59adb391dea5042341522f83e42a7fc2fb482d59f08c66b2"
    end
    if Hardware::CPU.intel?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.71.0/eksctl_Linux_amd64.tar.gz"
      sha256 "de05883d3c3be2eb0a369df261333f89f7978ce2fb4c96117b5f7e9df41cf38e"
    end
  end

  head "https://github.com/weaveworks/eksctl/releases/download/latest_release/eksctl_Darwin_amd64.tar.gz"

  depends_on "kubernetes-cli"
  depends_on "aws-iam-authenticator"

  def install
    bin.install "eksctl"

    # Install bash completion
    output = Utils.popen_read("#{bin}/eksctl completion bash")
    (bash_completion/"eksctl").write output

    # Install zsh completion
    output = Utils.popen_read("#{bin}/eksctl completion zsh")
    (zsh_completion/"_eksctl").write output
  end
end
