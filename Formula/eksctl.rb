# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Eksctl < Formula
  desc "The official CLI for Amazon EKS"
  homepage "https://eksctl.io/"
  version "0.70.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.70.0/eksctl_Darwin_amd64.tar.gz"
      sha256 "06d466e629c75cdaf79235f23f5404769878a77df50925749df46a40d252b4c9"
    end
    if Hardware::CPU.arm?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.70.0/eksctl_Darwin_arm64.tar.gz"
      sha256 "97acbc9f155b2fe696292bc74ca0d0bf7d29fbe7fb6f943dbd8229e74c55eb1d"
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.70.0/eksctl_Linux_amd64.tar.gz"
      sha256 "25490c48a2cefe003f51bd569a7fdab2eec7b5f23fd190b8bb344f8c2344cce2"
    end
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.70.0/eksctl_Linux_armv6.tar.gz"
      sha256 "4db2a587d9e2a898c5154e96716dd3075e1fb7bd981d6bc32f84df6e27c5a23b"
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/weaveworks/eksctl/releases/download/v0.70.0/eksctl_Linux_arm64.tar.gz"
      sha256 "50a5e145a7f9ef3e7e3f74528e6613c867ac8cb6d65ff8d8d2f094bc13d01d27"
    end
  end

  head "https://github.com/weaveworks/eksctl/releases/download/latest_release/eksctl_Darwin_amd64.tar.gz"

  depends_on "kubernetes-cli"
  depends_on "aws-iam-authenticator"

  def install
    bin.install "eksctl"

    # Install bash completion
    output = Utils.popen_read("#{bin}/eksctl completion bash")
    (bash_completion/"eksctl").write output

    # Install zsh completion
    output = Utils.popen_read("#{bin}/eksctl completion zsh")
    (zsh_completion/"_eksctl").write output
  end
end
