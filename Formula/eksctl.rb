# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Eksctl < Formula
  desc "The official CLI for Amazon EKS"
  homepage "https://eksctl.io/"
  version "0.37.0"
  bottle :unneeded

  if OS.mac?
    url "https://github.com/weaveworks/eksctl/releases/download/0.37.0/eksctl_Darwin_amd64.tar.gz"
    sha256 "e63349d961a5f9c7f13690b1915b8c6bd345d552673dae18b360d2a4b63cf5a8"
  end
  if OS.linux? && Hardware::CPU.intel?
    url "https://github.com/weaveworks/eksctl/releases/download/0.37.0/eksctl_Linux_amd64.tar.gz"
    sha256 "4ef5775f237fd9c5ea3f3984e9a1bd9e7fe1b8106634665b27153eb58c245437"
  end
  if OS.linux? && Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
    url "https://github.com/weaveworks/eksctl/releases/download/0.37.0/eksctl_Linux_armv6.tar.gz"
    sha256 "1bfce5b04c6d15ebfb1fbc9b999180169b6d33a7aacf6957946674669eeecde6"
  end
  if OS.linux? && Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
    url "https://github.com/weaveworks/eksctl/releases/download/0.37.0/eksctl_Linux_arm64.tar.gz"
    sha256 "b902cfae7dd84f75171fe04d4711f56c40c462231b44c675fc2f2c80e8b7cea2"
  end

  head "https://github.com/weaveworks/eksctl/releases/download/latest_release/eksctl_Darwin_amd64.tar.gz"

  depends_on "kubernetes-cli"
  depends_on "aws-iam-authenticator"

  def install
    bin.install "eksctl"

    # Install bash completion
    output = Utils.popen_read("#{bin}/eksctl completion bash")
    (bash_completion/"eksctl").write output

    # Install zsh completion
    output = Utils.popen_read("#{bin}/eksctl completion zsh")
    (zsh_completion/"_eksctl").write output
  end
end
